<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Grin & Glisten â€” CATEGORY_TITLE</title>
  <link rel="icon" type="image/x-icon" href="/static/favicon.ico">

  <!-- Google font preload -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pirata+One&display=swap" rel="stylesheet">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Feather icons -->
  <script src="https://unpkg.com/feather-icons"></script>

  <!-- Snipcart -->
  <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.3.0/default/snipcart.css" />
  <script async src="https://cdn.snipcart.com/themes/v3.3.0/default/snipcart.js"></script>

  <!-- --- keep your original style block unchanged (copied from All Products) --- -->
  <style>
    /* ---------- fonts, variables and base ---------- */
    @font-face { font-family: "Monument Extended"; src: url("/fonts/MonumentExtended-FreeForPersonalUse/MonumentExtended-Regular.woff2") format("woff2"), url("/fonts/MonumentExtended-FreeForPersonalUse/MonumentExtended-Regular.ttf") format("truetype"); font-weight:400; font-style:normal; font-display:swap; }
    @font-face { font-family: "Monument Extended Ultrabold"; src: url("/fonts/MonumentExtended-FreeForPersonalUse/MonumentExtended-Ultrabold.otf") format("opentype"); font-weight:900; font-style:normal; font-display:swap; }
    @font-face { font-family: "Plunct"; src: url("/fonts/Plunct(1).woff2") format("woff2"); font-weight:400 800; font-style:normal; font-display:swap; }
    @font-face { font-family: 'Pirata One'; src: url('/fonts/PirataOne-Regular.ttf') format('truetype'); font-weight:400; font-style:normal; font-display:swap; }

    :root { --gold:#D4AF37; --gold-dark:#B58826; --black:#000; --white:#fff; --veer-deep:#B30000; }

    html{ font-size:112.5%; }
    html,body{ font-family:"Pirata One","Monument Extended",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif; margin:0; color:var(--black); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }

    .plunct{ font-family:"Plunct","Pirata One","Monument Extended",sans-serif; font-weight:700; }
    .veerwear{ font-family:"Monument Extended Ultrabold","Monument Extended","Pirata One",sans-serif; color:var(--veer-deep); font-weight:900; text-transform:uppercase; letter-spacing:0.6px; }
    .monument{ font-family:"Monument Extended","Pirata One",sans-serif; font-weight:700; }

    .bag-count{ font-family:"Monument Extended Ultrabold","Monument Extended",sans-serif; font-weight:900; font-size:11px; line-height:1; }

    /* ---- select-with-icon: hide native arrow and position custom icon ---- */
    .select-with-icon { position: relative; display: inline-flex; align-items:center; vertical-align:middle; }
    .select-with-icon i, .select-with-icon svg { position:absolute; right:12px; top:50%; transform:translateY(-50%); pointer-events:none; z-index:2; width:18px; height:18px; display:block; }
    .select-with-icon select { -webkit-appearance:none; -moz-appearance:none; appearance:none; background-image:none; padding-left:12px; padding-right:44px; height:38px; line-height:1; border-radius:6px; border:1px solid var(--black); color:var(--black); background:white; z-index:1; }

    /* Hero (curated landing uses same class but different background set inline) */
    .shop-hero {
      position: relative;
      color:#fff;
      overflow:visible;
      padding-top:6rem;
      padding-bottom:6rem;
      min-height:48vh;
      display:flex;
      align-items:center;
    }
    .shop-hero .overlay{ position:absolute; inset:0; background:rgba(0,0,0,0.35); pointer-events:none; }
    .shop-hero .hero-inner{ position:relative; z-index:2; }

    /* filter panel sticky (kept for layout parity) */
    .filter-panel{ position:sticky; top:96px; max-height:calc(100vh - 110px); overflow:auto; padding-right:8px; }
    .filter-panel::-webkit-scrollbar{ width:8px; } .filter-panel::-webkit-scrollbar-thumb{ background:rgba(0,0,0,0.08); border-radius:6px; }

    .merch-inline-img{ width:20px; height:20px; object-fit:contain; margin-right:8px; display:inline-block; vertical-align:middle; }
    .badge-gold{ background:var(--gold); color:#000; font-weight:900; padding:4px 8px; border-radius:6px; font-size:11px; }

    .product-card{ border:1px solid rgba(0,0,0,0.06); box-shadow:0 6px 18px rgba(0,0,0,0.06); transition:transform .18s ease, box-shadow .18s ease; }
    .product-card:hover{ transform:translateY(-6px); box-shadow:0 14px 30px rgba(0,0,0,0.08); }

    /* small page button & other styles copied from your AllProducts (keeps look consistent) */
    .page-btn { transition: all .16s ease; background: transparent; border: 1px solid rgba(0,0,0,0.12); width: 40px; height:40px; display:flex; align-items:center; justify-content:center; border-radius:8px; cursor:pointer; font-weight:700; background-clip: padding-box; position: relative; z-index: 2; overflow: visible; }
    .heart-btn{ background:rgba(255,255,255,0.85); border-radius:9999px; width:40px; height:40px; display:flex; align-items:center; justify-content:center; }
    .heart-active{ background:var(--gold); color:#000 !important; }
    /* dropdown and search styles retained as-is */
    .dropdown-menu{ position: fixed; background: #fff; color: var(--black); border-radius: 10px; box-shadow: 0 12px 36px rgba(0,0,0,0.12); padding: 6px 12px; z-index: 9999; display: none; white-space: nowrap; pointer-events: auto; min-width: 120px; }
    .dropdown-menu.open { display: block; }
    .search-wrap { position:relative; display:inline-flex; align-items:center; gap:8px; }
    .search-input { position: absolute; right: 44px; width: 0; opacity: 0; transition: width .22s cubic-bezier(.2,.9,.3,1), opacity .18s ease; border:1px solid rgba(0,0,0,0.08); padding:8px 10px; border-radius:8px; font-size:0.95rem; outline:none; background:#fff; color:var(--black); transform-origin: right center; box-shadow: 0 6px 18px rgba(0,0,0,0.04); z-index: 60; white-space:nowrap; }
    .search-wrap.open .search-input { width: 220px; opacity: 1; }
    @media (max-width:767px){
      .search-wrap .search-input { display:none !important; width:0 !important; opacity:0 !important; position:static !important; }
    }
  </style>
</head>
<body class="monument">
  <!-- NAV (unchanged) -->
  <nav class="bg-white text-black shadow-md sticky top-0 z-50">
    <div class="container mx-auto px-6 py-3 flex items-center justify-between">
      <div class="flex items-center gap-6 min-w-0">
        <button id="mobileMenuBtn" aria-label="Open menu" class="md:hidden"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><path d="M3 7h18M3 12h18M3 17h18"></path></svg></button>
        <a href="/Home/" class="flex items-center"><span class="monument text-2xl" style="font-weight:900; color:var(--black);">Grin & Glisten</span></a>

        <div class="hidden md:flex space-x-8">
          <div class="group" id="all-products-group">
            <button class="menu-trigger monument text-black" aria-expanded="false" aria-haspopup="true" id="allProductsTrigger">
              <span class="menu-label">All Products</span><i data-feather="chevron-down" class="w-4 h-4"></i>
            </button>
            <div class="dropdown-menu rounded-md" role="menu" aria-hidden="true" id="allProductsMenu">
              <div class="grid grid-cols-1 gap-0">
                <a href="/AllProducts/" class="monument">All Products</a>
                <div style="height:1px;background:#eee;margin:4px 0;"></div>
                <a href="/Grillz/" class="monument">Grillz</a>
                <a href="/NailJewelry/" class="monument">Nail Jewelry</a>
                <a href="/Earrings/" class="monument">Earrings</a>
                <div style="height:1px;background:#eee;margin:6px 0;"></div>
                <a href="/VEERWEAR/" class="veerwear">Veerwear</a>
                <div style="height:1px;background:#eee;margin:6px 0;"></div>
                <a href="/aLvaLemerCh/" class="flex items-center pl-0">
                  <img src="/images/vale-logo-removebg-preview.png" alt="vaLe" class="merch-inline-img">
                  <span class="plunct">aL vaLe merCh</span>
                </a>
              </div>
            </div>
          </div>

          <a href="/HowToOrder/" class="monument hover:text-amber-600 text-black">How to Order</a>
          <a href="/ImpressionKit/" class="monument hover:text-amber-600 text-black">Impression Kit</a>
          <a href="/Gallery/" class="monument hover:text-amber-600 text-black">Gallery</a>
        </div>
      </div>

      <!-- header icons -->
      <div class="header-actions">
        <div class="search-wrap" id="desktopSearchWrap" aria-hidden="false">
          <form id="headerSearchForm" class="search-form" role="search" action="/search.html" method="get">
            <input id="headerSearchInput" name="q" type="search" class="search-input" placeholder="Search products..." aria-label="Search products">
            <button id="headerSearchBtn" type="submit" class="search-btn" aria-label="Search">
              <i data-feather="search" class="w-4 h-4"></i>
            </button>
          </form>
        </div>

        <a href="/favorites.html" class="text-black flex items-center justify-center" id="headerFavorites" aria-label="Favorites">
          <i data-feather="heart" class="w-5 h-5"></i>
        </a>

        <a href="#" id="headerCartToggle" class="relative snipcart-checkout text-black nav-btn" aria-label="Cart">
          <i data-feather="shopping-bag" class="w-5 h-5"></i>
          <span class="absolute -top-2 -right-2 bg-amber-600 text-black text-xs rounded-full w-5 h-5 flex items-center justify-center bag-count">
            <span class="snipcart-items-count">0</span>
          </span>
        </a>
      </div>
    </div>

    <!-- mobile nav (unchanged) -->
    <div id="mobileNav" class="md:hidden" style="display:none;">
      <div class="flex items-center justify-between mb-4 px-4">
        <div class="flex items-center gap-3">
          <img src="/images/vale-logo-removebg-preview.png" alt="vaLe" class="w-8 h-8 object-contain">
          <span class="monument text-lg" style="font-weight:900; color:var(--black);">Grin & Glisten</span>
        </div>
        <button id="mobileCloseBtn" class="p-2" title="Close menu"><i data-feather="x"></i></button>
      </div>
      <div id="mobileSearchBar" aria-hidden="true">
        <form id="mobileSearchForm" action="/search.html" method="get" role="search">
          <input id="mobileSearchInput" name="q" type="search" placeholder="Search products..." aria-label="Search products">
          <button type="submit" class="bg-amber-600 text-black px-3 py-2 rounded monument">Search</button>
        </form>
      </div>

      <div class="space-y-3 monument px-4">
        <a href="/Home/" class="block py-2 border-b">HOME</a>
        <div class="pt-2 pb-2 border-b">
          <div class="font-medium mb-2">All Products</div>
          <a href="/Grillz/" class="block py-1">Grillz</a>
          <a href="/NailJewelry/" class="block py-1">Nail Jewelry</a>
          <a href="/Earrings/" class="block py-1">Earrings</a>
          <a href="/VEERWEAR/" class="block py-1"><span class="veerwear">Veerwear</span></a>
          <a href="/aLvaLemerCh/" class="block py-1 flex items-center">
            <img src="/images/vale-logo-removebg-preview.png" class="merch-inline-img" alt="vaLe"/>
            <span class="plunct">aL vaLe merCh</span>
          </a>
        </div>

        <a href="/HowToOrder/" class="block py-2 border-b">How to Order</a>
        <a href="/ImpressionKit/" class="block py-2 border-b">Impression Kit</a>
        <a href="/Gallery/" class="block py-2 border-b">Gallery</a>

        <a href="/favorites.html" class="block py-2 border-b">Favorites</a>
      </div>
    </div>
  </nav>

  <!-- ======================
       HERO â€” replace GIF_URL, CATEGORY_TITLE, CATEGORY_SUBTAGLINE
       ====================== -->
  <section class="shop-hero text-white" style="background-image: url('GIF_URL'); background-size:cover; background-position:center;">
    <div class="overlay" aria-hidden="true"></div>
    <div class="container mx-auto px-6 hero-inner">
      <div class="shop-banner">
        <div>
          <h1 class="monument text-5xl md:text-6xl mb-4" style="font-weight:900;">CATEGORY_TITLE</h1>
          <p class="text-lg md:text-xl opacity-90 mb-4">CATEGORY_SUBTAGLINE</p>
          <div class="flex items-center text-gray-200 text-sm monument">
            <a href="/Home/" class="hover:text-white text-gray-200">Home</a>
            <i data-feather="chevron-right" class="mx-2 w-4 h-4"></i>
            <a href="/AllProducts/" class="hover:text-white text-gray-200">All Products</a>
            <i data-feather="chevron-right" class="mx-2 w-4 h-4"></i>
            <span>CATEGORY_TITLE</span>
          </div>
          <div class="mt-6">
            <!-- View all: links to AllProducts with category param (optional: use query param or localStorage prefilter) -->
            <a id="viewAllBtn" href="/AllProducts/?category=CATEGORY_SLUG" class="inline-block bg-amber-600 hover:bg-amber-700 text-black monument px-4 py-3 rounded-md">View all CATEGORY_TITLE</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ======================
       CURATED CONTENT AREA (replaces the AllProducts main body)
       ====================== -->
  <section class="py-12">
    <div class="container mx-auto px-6">
      <div class="flex flex-col md:flex-row gap-8">
        <!-- left column: small filter / quick links (keeps parity with AllProducts but compact) -->
        <aside class="md:w-1/4">
          <div class="bg-white p-6 rounded-lg filter-panel monument">
            <h3 class="font-medium text-lg mb-4" style="color:var(--black);">Explore</h3>

            <div class="space-y-3 mb-4">
              <a href="#featured" class="block py-2 monument" aria-label="Featured">Featured</a>
              <a href="#subtypes" class="block py-2 monument" aria-label="By style">By style</a>
              <a href="#new-arrivals" class="block py-2 monument" aria-label="New arrivals">New arrivals</a>
              <a href="/AllProducts/?category=CATEGORY_SLUG" class="block py-2 monument">View all CATEGORY_TITLE</a>
            </div>

            <h4 class="monument font-medium mb-3">Quick Filters</h4>
            <div class="space-y-2 text-sm">
              <button onclick="applyQuickFilter('Gold')" class="w-full text-left py-2 border rounded">Gold</button>
              <button onclick="applyQuickFilter('Silver')" class="w-full text-left py-2 border rounded">Silver</button>
              <button onclick="applyQuickFilter('Under200')" class="w-full text-left py-2 border rounded">Under $200</button>
            </div>
          </div>
        </aside>

        <!-- main curated column -->
        <main class="md:w-3/4 monument">
          <!-- small intro / editorial -->
          <div class="mb-8">
            <p class="text-gray-800" style="color:var(--black);">A short intro (1â€“2 lines) about CATEGORY_TITLE. Talk about materials, vibes, and what makes these pieces special. Keep it enticing and quick to read.</p>
          </div>

          <!-- Featured curated grid -->
          <section id="featured" class="mb-10">
            <h2 class="text-2xl monument mb-4">Featured</h2>
            <div id="curatedGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
          </section>

          <!-- Subtypes section: anchors + small examples -->
          <section id="subtypes" class="mb-10">
            <h2 class="text-2xl monument mb-4">By style</h2>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div>
                <h3 class="font-medium">Subtype A</h3>
                <p class="text-sm mb-2">Quick line about this subtype.</p>
                <div class="space-y-3">
                  <div class="mini-sample" id="sub-sample-1"></div>
                  <a href="/AllProducts/?category=CATEGORY_SLUG&style=subtypeA" class="text-sm monument">See all Subtype A â†’</a>
                </div>
              </div>

              <div>
                <h3 class="font-medium">Subtype B</h3>
                <p class="text-sm mb-2">Quick line about this subtype.</p>
                <div class="space-y-3">
                  <div class="mini-sample" id="sub-sample-2"></div>
                  <a href="/AllProducts/?category=CATEGORY_SLUG&style=subtypeB" class="text-sm monument">See all Subtype B â†’</a>
                </div>
              </div>

              <div>
                <h3 class="font-medium">Subtype C</h3>
                <p class="text-sm mb-2">Quick line about this subtype.</p>
                <div class="space-y-3">
                  <div class="mini-sample" id="sub-sample-3"></div>
                  <a href="/AllProducts/?category=CATEGORY_SLUG&style=subtypeC" class="text-sm monument">See all Subtype C â†’</a>
                </div>
              </div>
            </div>
          </section>

          <!-- New arrivals small row -->
          <section id="new-arrivals" class="mb-10">
            <h2 class="text-2xl monument mb-4">New Arrivals</h2>
            <div id="newArrivals" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4"></div>
          </section>
        </main>
      </div>
    </div>
  </section>

  <!-- FOOTER (unchanged) -->
  <footer class="py-12">
    <div class="container mx-auto px-6">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <h3 class="monument text-xl mb-4" style="font-weight:900;">Grin & Glisten</h3>
          <p class="mb-4">Custom grillz and street jewelry crafted with precision and attitude.</p>
        </div>
        <div>
          <h4 class="monument font-medium mb-4">Shop</h4>
          <ul class="space-y-2">
            <li><a href="/AllProducts/" class="text-sm">All Products</a></li>
            <li><a href="/Grillz/" class="text-sm">Grillz</a></li>
            <li><a href="/NailJewelry/" class="text-sm">Nail Jewelry</a></li>
            <li><a href="/Earrings/" class="text-sm">Earrings</a></li>
            <li><a href="/VEERWEAR/" class="veerwear text-sm">Veerwear</a></li>
            <li><a href="/aLvaLemerCh/" class="plunct text-sm">aL vaLe</a></li>
          </ul>
        </div>
        <div>
          <h4 class="monument font-medium mb-4">Support</h4>
          <ul class="space-y-2">
            <li><a href="/HowToOrder/" class="text-sm">How to Order</a></li>
            <li><a href="/ImpressionKit/" class="text-sm">Impression Kit</a></li>
          </ul>
        </div>
        <div>
          <h4 class="monument font-medium mb-4">Legal</h4>
          <ul class="space-y-2">
            <li><a href="/TermsandConditions/" class="text-sm">Terms & Conditions</a></li>
          </ul>
        </div>
      </div>
      <div class="border-t mt-12 pt-8 text-center text-sm" style="border-color:#111;">
        <p>Â© 2025 Grin & Glisten. All rights reserved. <span class="plunct">aL vaLe</span> music subsidiary.</p>
      </div>
    </div>
  </footer>

  <!-- Snipcart root -->
  <div hidden id="snipcart" data-api-key="YOUR_SNIPCART_API_KEY"></div>

  <!-- ============= Curated content script ============= -->
  <script>
    feather.replace();

    // -------- CONFIG: set these per-page (replace placeholders) --------
    const CATEGORY_SLUG = 'CATEGORY_SLUG';        // e.g. 'Earrings'
    const CATEGORY_TITLE = 'CATEGORY_TITLE';      // e.g. 'Earrings'
    const CATEGORY_SUBTAGLINE = 'CATEGORY_SUBTAGLINE'; // short line

    // curatedProducts: fill with objects for the featured grid (id,title,description,image,price,category,featured)
    // You can paste 6-12 items here. Keep the structure similar to your AllProducts "products" objects.
    const curatedProducts = [
      // Example â€“ replace with real items
      { id: 101, title: 'Gold Mini Hoop', description: '14k gold â€¢ everyday', image:'/images/placeholder-1.jpg', price:79, category:CATEGORY_TITLE, featured:true },
      { id: 102, title: 'Diamond Stud', description: 'CZ â€¢ elegant', image:'/images/placeholder-2.jpg', price:129, category:CATEGORY_TITLE, featured:false },
      { id: 103, title: 'Huggie Charm', description: 'Silver â€¢ charm', image:'/images/placeholder-3.jpg', price:59, category:CATEGORY_TITLE, featured:false },
      // add up to 12 curated entries
    ];

    // new arrivals small list (optional)
    const newArrivals = [
      { id: 201, title:'New 1', image:'/images/placeholder-4.jpg', price:99, description:'New' },
      { id: 202, title:'New 2', image:'/images/placeholder-5.jpg', price:129, description:'New' },
      // ...
    ];

    // subtype samples mapping â€” each should be an array of 1-3 sample items
    const subtypeSamples = {
      subtypeA: [
        { id:301, title:'Subtype A1', image:'/images/placeholder-6.jpg', price:49, description:'Sample' },
        { id:302, title:'Subtype A2', image:'/images/placeholder-7.jpg', price:69, description:'Sample' }
      ],
      subtypeB: [
        { id:303, title:'Subtype B1', image:'/images/placeholder-8.jpg', price:89, description:'Sample' }
      ],
      subtypeC: [
        { id:304, title:'Subtype C1', image:'/images/placeholder-9.jpg', price:39, description:'Sample' }
      ]
    };

    // ----------------- render curated grid (uses same card look & snipcart button) -----------------
    function renderCurated(){
      const grid = document.getElementById('curatedGrid');
      grid.innerHTML = '';
      const favSet = new Set(JSON.parse(localStorage.getItem('sb_favorites')||'[]') || []);

      for(const p of curatedProducts){
        const fontClass = (p.category && p.category.toLowerCase().includes('veer')) ? 'veerwear' : ((p.category && p.category.toLowerCase().includes('a l vaLe'.toLowerCase())) ? 'plunct' : 'monument');
        const heartActive = favSet.has(p.id);

        const card = document.createElement('div');
        card.className = 'bg-white rounded-lg overflow-hidden product-card';
        card.innerHTML = `
          <div class="relative overflow-hidden h-64">
            <img src="${p.image}" alt="${escapeHtml(p.title)}" class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"></div>
            ${p.featured ? `<div class="absolute top-3 left-3 badge-gold">FEATURED</div>` : ''}
            <button class="absolute top-3 right-3 heart-btn ${heartActive ? 'heart-active' : ''}" data-id="${p.id}" title="Save to favorites">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="${heartActive ? 'currentColor' : 'none'}" stroke="currentColor" stroke-width="1.5"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"/></svg>
            </button>
          </div>
          <div class="p-4">
            <h3 class="font-medium mb-1 ${fontClass}" style="color:var(--black);">${escapeHtml(p.title)}</h3>
            <p class="${fontClass} text-gray-600 text-sm mb-2" style="color:var(--black);">${escapeHtml(p.description||'')}</p>
            <div class="flex justify-between items-center">
              <span class="${fontClass} font-bold" style="color:var(--black);">$${Number(p.price).toLocaleString()}</span>

              <button class="snipcart-add-item inline-flex items-center px-3 py-2 rounded text-sm border border-transparent bg-amber-600 hover:bg-amber-700"
                data-item-id="${p.id}"
                data-item-name="${escapeAttr(p.title)}"
                data-item-price="${escapeAttr(p.price)}"
                data-item-url="/AllProducts/"
                data-item-description="${escapeAttr(p.description||'')}"
                data-item-image="${escapeAttr(p.image)}">
                Add to cart
              </button>
            </div>
          </div>
        `;
        grid.appendChild(card);
      }

      // bind favorite buttons
      document.querySelectorAll('.heart-btn').forEach(btn=>{
        btn.addEventListener('click', (e)=>{
          const id = Number(btn.getAttribute('data-id'));
          toggleFavorite(id);
          btn.classList.toggle('heart-active');
        });
      });

      feather.replace();
    }

    // render subtype mini-samples
    function renderSubtypeSamples(){
      Object.keys(subtypeSamples).forEach((key, i)=>{
        const container = document.getElementById('sub-sample-'+(i+1));
        if(!container) return;
        container.innerHTML = '';
        for(const p of subtypeSamples[key]){
          const html = `
            <div class="flex items-center gap-3 mb-2">
              <img src="${p.image}" alt="${escapeHtml(p.title)}" class="w-14 h-14 object-cover rounded">
              <div>
                <div class="text-sm font-medium">${escapeHtml(p.title)}</div>
                <div class="text-xs">${escapeHtml(p.description||'')}</div>
              </div>
            </div>
          `;
          container.insertAdjacentHTML('beforeend', html);
        }
      });
    }

    // render new arrivals thumbnails
    function renderNewArrivals(){
      const c = document.getElementById('newArrivals'); c.innerHTML='';
      for(const p of newArrivals){
        c.insertAdjacentHTML('beforeend', `
          <div class="bg-white rounded p-2">
            <img src="${p.image}" alt="${escapeHtml(p.title)}" class="w-full h-24 object-cover rounded mb-2">
            <div class="text-sm monument">${escapeHtml(p.title)}</div>
            <div class="text-xs">$${Number(p.price).toLocaleString()}</div>
          </div>
        `);
      }
    }

    // favorites localStorage helpers (copied behaviour)
    function readFavorites(){ try{ return new Set(JSON.parse(localStorage.getItem('sb_favorites')||'[]')); }catch(e){ return new Set(); } }
    function writeFavorites(set){ const arr = Array.from(set); localStorage.setItem('sb_favorites', JSON.stringify(arr)); }
    function toggleFavorite(id){ const s = readFavorites(); if(s.has(id)) s.delete(id); else s.add(id); writeFavorites(s); }

    // small quick filter helper (client-side only: navigates to AllProducts with params)
    function applyQuickFilter(tag){
      // navigate to AllProducts and set a search param; AllProducts can be extended to read these.
      const url = '/AllProducts/?category=' + encodeURIComponent(CATEGORY_SLUG) + '&quick=' + encodeURIComponent(tag);
      window.location.href = url;
    }

    function escapeHtml(s){ if(!s) return ''; return s.replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }
    function escapeAttr(s){ return escapeHtml(String(s)); }

    // init
    document.addEventListener('DOMContentLoaded', ()=>{
      // populate page title/tagline dynamically if desired
      document.title = CATEGORY_TITLE + ' â€” Grin & Glisten';
      // set H1 & tagline if you want to wire them; but easier: update consts above before saving file
      renderCurated();
      renderSubtypeSamples();
      renderNewArrivals();

      // wire up viewAllBtn text (in case you use same template file for multiple categories)
      const vbtn = document.getElementById('viewAllBtn');
      if(vbtn){
        vbtn.href = '/AllProducts/?category=' + encodeURIComponent(CATEGORY_SLUG);
        vbtn.textContent = 'View all ' + CATEGORY_TITLE;
      }
    });

  </script>

  <!-- keep your existing AllProducts script and helpers unchanged on the AllProducts page; this landing page intentionally doesn't override them -->
  <script>
    // Minimal behavior copied from your AllProducts (dropdown + mobile nav) so header interactions stay working here.
    feather.replace();

    const mobileBtn = document.getElementById('mobileMenuBtn');
    const mobileNav = document.getElementById('mobileNav');
    const mobileClose = document.getElementById('mobileCloseBtn');
    mobileBtn?.addEventListener('click', ()=> {
      mobileNav.style.display='block';
      document.body.classList.remove('mobile-search-open');
    });
    mobileClose?.addEventListener('click', ()=> {
      mobileNav.style.display='none';
      const mIn = document.getElementById('mobileSearchInput');
      if(mIn) mIn.value = '';
      document.body.classList.remove('mobile-search-open');
    });

    // dropdown binding (re-usable simplified)
    document.querySelectorAll('.group').forEach(group=>{
      const trigger = group.querySelector('.menu-trigger');
      const menu = group.querySelector('.dropdown-menu');
      if(!trigger || !menu) return;
      // move menu to body for z-index escape
      if(!menu.dataset.moved){ document.body.appendChild(menu); menu.dataset.moved='true'; menu.style.position='fixed'; }
      trigger.addEventListener('click', (e)=>{ e.preventDefault(); group.classList.toggle('open'); menu.classList.toggle('open'); });
      group.addEventListener('pointerleave', ()=>{ group.classList.remove('open'); menu.classList.remove('open'); });
    });

    // header search interaction copied (keeps behaviour same)
    (function initHeaderSearch(){
      const wrap = document.getElementById('desktopSearchWrap');
      const form = document.getElementById('headerSearchForm');
      const input = document.getElementById('headerSearchInput');
      const btn = document.getElementById('headerSearchBtn');
      if(!wrap||!form||!input||!btn) return;

      function isMobile(){ return window.matchMedia('(max-width:767px)').matches; }
      btn.addEventListener('click', (ev) => {
        if (isMobile()) { openMobileSearchAndFocus(); ev.preventDefault(); return; }
        const isOpen = wrap.classList.contains('open');
        if(!isOpen){ ev.preventDefault(); wrap.classList.add('open'); setTimeout(()=> input.focus(), 80); return; }
      });
      form.addEventListener('submit', (ev)=> {
        ev.preventDefault();
        const q = (input.value || '').trim();
        if(!q){ wrap.classList.remove('open'); input.value=''; return; }
        wrap.classList.remove('open'); const valueToSend = q; input.value='';
        setTimeout(()=> window.location.href = '/search.html?q=' + encodeURIComponent(valueToSend), 40);
      });
      document.addEventListener('click', (ev)=>{ if(!wrap.contains(ev.target)) { wrap.classList.remove('open'); input.value=''; } });
      document.addEventListener('keydown', (ev)=>{ if(ev.key === 'Escape'){ wrap.classList.remove('open'); input.value=''; }});
    })();

    function openMobileSearchAndFocus(){
      const mobileSearchBar = document.getElementById('mobileSearchBar');
      const mobileInput = document.getElementById('mobileSearchInput');
      if(mobileNav.style.display === 'none' || mobileNav.style.display === '') mobileNav.style.display = 'block';
      document.body.classList.add('mobile-search-open');
      setTimeout(()=> { if(mobileInput) mobileInput.focus(); }, 60);
    }
  </script>
</body>
</html>

